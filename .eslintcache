[{"/Users/izu/Desktop/MERN/happy-tea/client/src/App.js":"1","/Users/izu/Desktop/MERN/happy-tea/client/src/pages/user/Password.js":"2","/Users/izu/Desktop/MERN/happy-tea/client/src/pages/user/Wishlist.js":"3","/Users/izu/Desktop/MERN/happy-tea/client/src/components/nav/UserNav.js":"4","/Users/izu/Desktop/MERN/happy-tea/client/src/pages/user/History.js":"5","/Users/izu/Desktop/MERN/happy-tea/client/src/components/nav/Footer.js":"6","/Users/izu/Desktop/MERN/happy-tea/client/src/pages/auth/Login.js":"7","/Users/izu/Desktop/MERN/happy-tea/client/src/pages/auth/ForgotPassword.js":"8","/Users/izu/Desktop/MERN/happy-tea/client/src/components/routes/LoadingToRedirect.js":"9","/Users/izu/Desktop/MERN/happy-tea/client/src/components/loading/Loading.js":"10","/Users/izu/Desktop/MERN/happy-tea/client/src/components/nav/Header.js":"11","/Users/izu/Desktop/MERN/happy-tea/client/src/components/routes/UserRoute.js":"12","/Users/izu/Desktop/MERN/happy-tea/client/src/pages/auth/Register.js":"13","/Users/izu/Desktop/MERN/happy-tea/client/src/pages/auth/RegisterComplete.js":"14","/Users/izu/Desktop/MERN/happy-tea/client/src/functions/auth.js":"15","/Users/izu/Desktop/MERN/happy-tea/client/src/pages/Home.js":"16"},{"size":2286,"mtime":1612619700244,"results":"17","hashOfConfig":"18"},{"size":2118,"mtime":1612627415325,"results":"19","hashOfConfig":"18"},{"size":373,"mtime":1612627517681,"results":"20","hashOfConfig":"18"},{"size":742,"mtime":1612620412169,"results":"21","hashOfConfig":"18"},{"size":381,"mtime":1612627527478,"results":"22","hashOfConfig":"18"},{"size":1940,"mtime":1612605613070,"results":"23","hashOfConfig":"18"},{"size":4622,"mtime":1612605780918,"results":"24","hashOfConfig":"18"},{"size":2433,"mtime":1612605748806,"results":"25","hashOfConfig":"18"},{"size":883,"mtime":1612605667604,"results":"26","hashOfConfig":"18"},{"size":269,"mtime":1612605578540,"results":"27","hashOfConfig":"18"},{"size":2206,"mtime":1612620166496,"results":"28","hashOfConfig":"18"},{"size":423,"mtime":1612605676555,"results":"29","hashOfConfig":"18"},{"size":2137,"mtime":1612605809555,"results":"30","hashOfConfig":"18"},{"size":3233,"mtime":1612605834379,"results":"31","hashOfConfig":"18"},{"size":443,"mtime":1612530228737,"results":"32","hashOfConfig":"18"},{"size":138,"mtime":1612627502625,"results":"33","hashOfConfig":"18"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"1gvz3hh",{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"40","messages":"41","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"46","messages":"47","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"48"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"51","messages":"52","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"53"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"60","messages":"61","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"62"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"65"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/izu/Desktop/MERN/happy-tea/client/src/App.js",["70"],"/Users/izu/Desktop/MERN/happy-tea/client/src/pages/user/Password.js",[],"/Users/izu/Desktop/MERN/happy-tea/client/src/pages/user/Wishlist.js",[],"/Users/izu/Desktop/MERN/happy-tea/client/src/components/nav/UserNav.js",["71"],"/Users/izu/Desktop/MERN/happy-tea/client/src/pages/user/History.js",[],"/Users/izu/Desktop/MERN/happy-tea/client/src/components/nav/Footer.js",[],"/Users/izu/Desktop/MERN/happy-tea/client/src/pages/auth/Login.js",["72"],"import React, { useState, useEffect } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { Button, Row, Col } from \"antd\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { GoogleOutlined } from \"@ant-design/icons\";\nimport { Link } from \"react-router-dom\";\n\nimport { auth, googleAuthProvider } from \"../../firebase\";\nimport \"../../App.scss\";\nimport { createOrUpdateUser } from \"../../functions/auth\";\nimport Loading from \"../../components/loading/Loading\";\n\nconst Login = ({ history }) => {\n  const [email, setEmail] = useState(\"huunhankirigamer@gmail.com\");\n  const [password, setPassword] = useState(\"111111\");\n  const [loading, setLoading] = useState(false);\n\n  const { user } = useSelector((state) => ({ ...state }));\n\n  useEffect(() => {\n    if (user && user.token) history.push(\"/\");\n  }, [user]);\n\n  let dispatch = useDispatch();\n\n  const roleBasedRedirect = (res) => {\n    if (res.data.role === \"admin\") {\n      history.push(\"/admin/dashboard\");\n    } else {\n      history.push(\"/user/history\");\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n\n    try {\n      const result = await auth.signInWithEmailAndPassword(email, password);\n      const { user } = result;\n      const idTokenResult = await user.getIdTokenResult();\n\n      createOrUpdateUser(idTokenResult.token)\n        .then((res) => {\n          dispatch({\n            type: \"LOGGED_IN_USER\",\n            payload: {\n              name: res.data.name,\n              email: res.data.email,\n              token: idTokenResult.token,\n              role: res.data.role,\n              _id: res.data._id,\n            },\n          });\n\n          roleBasedRedirect(res);\n        })\n        .catch((err) => console.log(err));\n\n      // history.push(\"/\");\n    } catch (error) {\n      toast.error(error.message);\n      setLoading(false);\n    }\n  };\n\n  const googleLogin = () => {\n    auth\n      .signInWithPopup(googleAuthProvider)\n      .then(async (result) => {\n        const { user } = result;\n        const idTokenResult = await user.getIdTokenResult();\n\n        createOrUpdateUser(idTokenResult.token)\n          .then((res) => {\n            dispatch({\n              type: \"LOGGED_IN_USER\",\n              payload: {\n                name: res.data.name,\n                email: res.data.email,\n                token: idTokenResult.token,\n                role: res.data.role,\n                _id: res.data._id,\n              },\n            });\n\n            roleBasedRedirect(res);\n          })\n          .catch((err) => console.log(err));\n\n        // history.push(\"/\");\n      })\n      .catch((error) => {\n        toast.error(error.message);\n      });\n  };\n\n  const loginForm = () => (\n    <form onSubmit={handleSubmit}>\n      <div className=\"form-group\">\n        <input\n          type=\"email\"\n          className=\"form-control\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          placeholder=\"Nhập email\"\n          autoFocus\n        />\n        <br />\n        <input\n          type=\"password\"\n          className=\"form-control\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          placeholder=\"Nhập mật khẩu\"\n        />\n      </div>\n\n      <Link to=\"/forgot/password\" className=\"\">\n        Quên mật khẩu?\n      </Link>\n\n      <Button\n        type=\"primary\"\n        size=\"large\"\n        onClick={handleSubmit}\n        block\n        disabled={!email || password.length < 6}\n        className=\"mt-3\"\n      >\n        Đăng nhập với email và mật khẩu\n      </Button>\n    </form>\n  );\n\n  return (\n    <div className=\"container pt-5 pb-5\">\n      <Row className=\"form-style\">\n        <Col span={14}>\n          <img\n            className=\"poster\"\n            alt=\"example\"\n            src=\"https://firebasestorage.googleapis.com/v0/b/happy-tea-1a89b.appspot.com/o/Banner-02.png?alt=media&token=d01ed6f7-88d0-43ce-91e3-fa7d3ae45092\"\n            draggable=\"false\"\n          />\n        </Col>\n        <Col span={10} className=\"register p-5\">\n          {loading ? (\n            <h4>\n              Đăng Nhập <Loading />\n            </h4>\n          ) : (\n            <h4>Đăng Nhập</h4>\n          )}\n          {loginForm()}\n\n          <p className=\"or-text\">Hoặc</p>\n\n          <Button\n            type=\"danger\"\n            size=\"large\"\n            onClick={googleLogin}\n            icon={<GoogleOutlined />}\n            className=\"btn-google\"\n            block\n          >\n            Đăng nhập với Google\n          </Button>\n        </Col>\n      </Row>\n    </div>\n  );\n};\n\nexport default Login;\n","/Users/izu/Desktop/MERN/happy-tea/client/src/pages/auth/ForgotPassword.js",["73"],"/Users/izu/Desktop/MERN/happy-tea/client/src/components/routes/LoadingToRedirect.js",["74"],"import React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { Row } from \"antd\";\n\nimport Loading from \"../loading/Loading\";\n\nconst LoadingToRedirect = () => {\n  const [count, setCount] = useState(3);\n\n  let history = useHistory();\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setCount((currentCount) => --currentCount);\n    }, 1000);\n    // redirect once count is equal to 0\n    count === 0 && history.push(\"/\");\n    // clean up\n    return () => clearInterval(interval);\n  }, [count]);\n\n  return (\n    <div className=\"container pt-5 pb-5\">\n      <Row className=\"d-flex justify-content-center\">\n        <Loading />\n      </Row>\n      <Row className=\"d-flex justify-content-center mt-2\">\n        <h6>Chuyển hướng trang trong {count} giây</h6>\n      </Row>\n    </div>\n  );\n};\n\nexport default LoadingToRedirect;\n","/Users/izu/Desktop/MERN/happy-tea/client/src/components/loading/Loading.js",[],"/Users/izu/Desktop/MERN/happy-tea/client/src/components/nav/Header.js",[],"/Users/izu/Desktop/MERN/happy-tea/client/src/components/routes/UserRoute.js",[],"/Users/izu/Desktop/MERN/happy-tea/client/src/pages/auth/Register.js",["75"],"import React, { useState, useEffect } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { Button, Row, Col } from \"antd\";\nimport { useSelector } from \"react-redux\";\n\nimport { auth } from \"../../firebase\";\nimport \"../../App.scss\";\n\nconst Register = ({ history }) => {\n  const [email, setEmail] = useState(\"\");\n\n  const { user } = useSelector((state) => ({ ...state }));\n\n  useEffect(() => {\n    if (user && user.token) history.push(\"/\");\n  }, [user]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    // validation\n    if (!email) {\n      toast.error(\"Email is required\");\n      return;\n    }\n\n    const config = {\n      url: process.env.REACT_APP_REGISTER_REDIRECT_URL,\n      handleCodeInApp: true,\n    };\n\n    await auth.sendSignInLinkToEmail(email, config);\n    toast.dark(`Hi ${email}. Gửi email cho m rồi kìa th lz!`);\n\n    // save user email in local storage\n    window.localStorage.setItem(\"emailForRegistration\", email);\n    // clear state\n    setEmail(\"\");\n  };\n\n  const registerForm = () => (\n    <form onSubmit={handleSubmit}>\n      <div className=\"form-group\">\n        <input\n          type=\"email\"\n          className=\"form-control\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          placeholder=\"Nhập email\"\n          autoFocus\n        />\n      </div>\n\n      <Button\n        type=\"primary\"\n        shape=\"round\"\n        size=\"large\"\n        htmlType=\"submit\"\n        block\n        className=\"mt-3\"\n      >\n        Gửi email xác thực\n      </Button>\n    </form>\n  );\n\n  return (\n    <div className=\"container pt-5 pb-5\">\n      <Row className=\"form-style\">\n        <Col span={14}>\n          <img\n            className=\"poster\"\n            alt=\"example\"\n            src=\"https://firebasestorage.googleapis.com/v0/b/happy-tea-1a89b.appspot.com/o/Banner-02.png?alt=media&token=d01ed6f7-88d0-43ce-91e3-fa7d3ae45092\"\n            draggable=\"false\"\n          />\n        </Col>\n        <Col span={10} className=\"register p-5\">\n          <h4>Đăng Ký</h4>\n          {registerForm()}\n        </Col>\n      </Row>\n    </div>\n  );\n};\n\nexport default Register;\n","/Users/izu/Desktop/MERN/happy-tea/client/src/pages/auth/RegisterComplete.js",["76"],"import React, { useState, useEffect } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { Button, Row, Col } from \"antd\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport { auth } from \"../../firebase\";\nimport \"../../App.scss\";\nimport { createOrUpdateUser } from \"../../functions/auth\";\n\nconst RegisterComplete = ({ history }) => {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  const { user } = useSelector((state) => ({ ...state }));\n  let dispatch = useDispatch();\n\n  useEffect(() => {\n    setEmail(window.localStorage.getItem(\"emailForRegistration\"));\n  }, []);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    // validation\n    if (!email || !password) {\n      toast.error(\"Email and password is required\");\n      return;\n    }\n\n    if (password.length < 6) {\n      toast.error(\"Password must be at least 6 characters long\");\n      return;\n    }\n\n    try {\n      const result = await auth.signInWithEmailLink(\n        email,\n        window.location.href\n      );\n      if (result.user.emailVerified) {\n        // remove user email from local storage\n        window.localStorage.removeItem(\"emailForRegistration\");\n        // get user id token\n        let user = auth.currentUser;\n        await user.updatePassword(password);\n        const idTokenResult = await user.getIdTokenResult();\n        // redux store\n        createOrUpdateUser(idTokenResult.token)\n          .then((res) => {\n            dispatch({\n              type: \"LOGGED_IN_USER\",\n              payload: {\n                name: res.data.name,\n                email: res.data.email,\n                token: idTokenResult.token,\n                role: res.data.role,\n                _id: res.data._id,\n              },\n            });\n          })\n          .catch((err) => console.log(err));\n        // redirect\n        history.push(\"/\");\n      }\n    } catch (error) {\n      toast.error(error.message);\n    }\n  };\n\n  const completeRegistrationForm = () => (\n    <form onSubmit={handleSubmit}>\n      <div className=\"form-group\">\n        <input type=\"email\" className=\"form-control\" value={email} disabled />\n        <br />\n        <input\n          type=\"password\"\n          className=\"form-control\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          placeholder=\"Password\"\n          autoFocus\n        />\n      </div>\n\n      <Button\n        type=\"primary\"\n        shape=\"round\"\n        size=\"large\"\n        htmlType=\"submit\"\n        block\n        className=\"mt-3\"\n      >\n        Hoàn tất đăng ký\n      </Button>\n    </form>\n  );\n\n  return (\n    <div className=\"container pt-5 pb-5\">\n      <Row className=\"form-style\">\n        <Col span={14}>\n          <img\n            className=\"poster\"\n            alt=\"example\"\n            src=\"https://firebasestorage.googleapis.com/v0/b/happy-tea-1a89b.appspot.com/o/Banner-02.png?alt=media&token=d01ed6f7-88d0-43ce-91e3-fa7d3ae45092\"\n            draggable=\"false\"\n          />\n        </Col>\n        <Col span={10} className=\"register p-5\">\n          <h4>Đăng Ký</h4>\n          {completeRegistrationForm()}\n        </Col>\n      </Row>\n    </div>\n  );\n};\n\nexport default RegisterComplete;\n","/Users/izu/Desktop/MERN/happy-tea/client/src/functions/auth.js",[],"/Users/izu/Desktop/MERN/happy-tea/client/src/pages/Home.js",[],{"ruleId":"77","severity":1,"message":"78","line":50,"column":6,"nodeType":"79","endLine":50,"endColumn":8,"suggestions":"80"},{"ruleId":"81","severity":1,"message":"82","line":1,"column":17,"nodeType":"83","messageId":"84","endLine":1,"endColumn":25},{"ruleId":"77","severity":1,"message":"85","line":22,"column":6,"nodeType":"79","endLine":22,"endColumn":12,"suggestions":"86"},{"ruleId":"77","severity":1,"message":"85","line":18,"column":6,"nodeType":"79","endLine":18,"endColumn":12,"suggestions":"87"},{"ruleId":"77","severity":1,"message":"85","line":20,"column":6,"nodeType":"79","endLine":20,"endColumn":13,"suggestions":"88"},{"ruleId":"77","severity":1,"message":"85","line":16,"column":6,"nodeType":"79","endLine":16,"endColumn":12,"suggestions":"89"},{"ruleId":"81","severity":1,"message":"90","line":14,"column":11,"nodeType":"83","messageId":"84","endLine":14,"endColumn":15},"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'dispatch'. Either include it or remove the dependency array.","ArrayExpression",["91"],"no-unused-vars","'useState' is defined but never used.","Identifier","unusedVar","React Hook useEffect has a missing dependency: 'history'. Either include it or remove the dependency array.",["92"],["93"],["94"],["95"],"'user' is assigned a value but never used.",{"desc":"96","fix":"97"},{"desc":"98","fix":"99"},{"desc":"98","fix":"100"},{"desc":"101","fix":"102"},{"desc":"98","fix":"103"},"Update the dependencies array to be: [dispatch]",{"range":"104","text":"105"},"Update the dependencies array to be: [history, user]",{"range":"106","text":"107"},{"range":"108","text":"107"},"Update the dependencies array to be: [count, history]",{"range":"109","text":"110"},{"range":"111","text":"107"},[1601,1603],"[dispatch]",[820,826],"[history, user]",[564,570],[545,552],"[count, history]",[453,459]]